# Инструкция по интеграции формы записи с Telegram

## Обзор
Форма записи к тренеру отправляет данные в Telegram через Bot API. Это позволяет вам получать уведомления о новых заявках прямо в Telegram.

## Что было создано

### 1. Страница политики конфиденциальности (`/src/pages/Privacy.tsx`)
- Полная страница с подробной политикой обработки персональных данных
- Содержит 12 разделов с информацией о сборе, использовании и защите данных
- Доступна по маршруту `/privacy`

### 2. Улучшенная страница 404 (`/src/pages/NotFound.tsx`)
- Современный дизайн с градиентным 404
- Кнопки навигации (на главную, вернуться назад)
- Полезные ссылки на основные разделы

### 3. Форма регистрации (`/src/components/RegistrationModal.tsx`)
- Modal диалог с полями:
  - Имя и фамилия (обязательно)
  - Email (обязательно, с валидацией)
  - Телефон (обязательно)
  - Сообщение (опционально)
- Валидация формы перед отправкой
- Интеграция с Telegram Bot API
- Красивый UI с состояниями загрузки и успеха

### 4. Обновления компонентов
- **ServiceCard**: Добавлена кнопка "Выбрать" для открытия формы записи
- **Footer**: Добавлена ссылка на страницу политики конфиденциальности
- **App.tsx**: Добавлен маршрут `/privacy`

## Установка и настройка Telegram Bot

### Шаг 1: Создание Telegram Bot
1. Откройте Telegram и найдите [@BotFather](https://t.me/BotFather)
2. Отправьте команду `/newbot`
3. Следуйте инструкциям:
   - Укажите имя бота (например, "Elena Fit Magic Bot")
   - Укажите username бота (должен заканчиваться на "_bot", например, "elena_fit_magic_bot")
4. BotFather выдаст вам **Bot Token** - сохраните его

### Шаг 2: Получение Chat ID
1. Создайте приватный Telegram канал или группу
2. Добавьте вашего бота в канал/группу
3. Один из способов получить Chat ID:
   - Отправьте боту сообщение `/start`
   - Посетите: `https://api.telegram.org/botВАШ_TOKEN/getUpdates`
   - В ответе найдите поле `chat.id`

Альтернативный способ:
- Добавьте бота в канал
- Отправьте сообщение в канал
- Посетите API URL выше и найдите Chat ID вашего канала

### Шаг 3: Настройка переменных окружения
1. Откройте файл `.env` в корневой папке проекта (или создайте его)
2. Добавьте следующие строки:
```env
VITE_TELEGRAM_BOT_TOKEN=ВАШ_BOT_TOKEN_ЗДЕСЬ
VITE_TELEGRAM_CHAT_ID=ВАШ_CHAT_ID_ЗДЕСЬ
```

Примеры:
```env
VITE_TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
VITE_TELEGRAM_CHAT_ID=-1001234567890
```

### Шаг 4: Проверка работы
1. Выполните команду: `npm run dev`
2. Откройте проект в браузере
3. Прокрутите до раздела "Форматы сопровождения"
4. Нажмите на кнопку "Выбрать" на любой карточке
5. Заполните форму и отправьте
6. Проверьте, что сообщение появилось в вашем Telegram канале

## Как работает отправка

Когда пользователь заполняет форму и нажимает "Отправить запрос":

1. Форма проходит валидацию (проверка на обязательные поля и формат email)
2. Данные отправляются на Telegram Bot API
3. Бот отправляет красиво отформатированное сообщение в ваш канал/группу с:
   - Форматом сопровождения (название услуги)
   - Именем клиента
   - Email адресом
   - Номером телефона
   - Дополнительным сообщением (если указано)
4. Пользователю показывается сообщение об успехе
5. Модал автоматически закрывается через 2 секунды

## Обработка ошибок

Если Telegram Bot Token или Chat ID не указаны (разработка):
- Форма отправляется в режиме демонстрации
- Показывается уведомление об успехе
- Данные логируются в console

Если произошла ошибка при отправке в Telegram:
- Показывается уведомление об ошибке с предложением связаться в Telegram
- Пользователь может попробовать отправить форму снова

## Удаление персональных данных

Согласно политике конфиденциальности, пользователи могут запросить удаление своих данных. 
Свяжитесь с ними через Telegram для обработки такого запроса.

## Безопасность

- **Bot Token**: Никогда не коммитьте реальный токен в публичный репозиторий
- **Chat ID**: Используйте переменные окружения через `.env.local` (добавлено в `.gitignore`)
- **Валидация**: Форма проверяет данные на клиентской стороне
- **SSL/HTTPS**: Используется безопасное соединение с API Telegram

## Поддержка

Если возникают проблемы с интеграцией:
1. Проверьте, что Bot Token и Chat ID правильно скопированы
2. Убедитесь, что бот добавлен в канал и имеет права на отправку сообщений
3. Проверьте браузерную консоль (F12 > Console) на наличие ошибок
4. Посетите: https://api.telegram.org/botВАШ_TOKEN/getMe для проверки токена
